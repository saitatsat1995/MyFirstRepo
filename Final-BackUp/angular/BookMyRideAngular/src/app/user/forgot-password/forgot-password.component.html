<app-header></app-header>
<div class="container" style="padding-bottom:25px;margin-bottom:180px">
  <div *ngIf="first; else SecondBlock">
  <div class="row w3-padding-64">
     <div class="col-md-3"></div>
     <div class="col-md-6">
       <h5 class="w3-padding w3-blue">Forget Password</h5>
       <div class="w3-card-4 w3-padding" style="margin-top:-10px" id="login_div">

        <form #myLoginForm="ngForm" (ngSubmit)="forgotPassword(myLoginForm)">
          
           <div class="form-group">
             <label>Email</label>
             <span class="validation-error w3-small" style="text-align:center" *ngIf="userEmail.invalid && userEmail.dirty">
                 <span style="color:red">* Please enter a valid email Id</span>
             </span>
             <input type="email" name="user_email" [(ngModel)]="user.Email" #userEmail="ngModel" class="form-control" 
                     placeholder="Enter your Email id" [class.is-invalid]="userEmail.invalid && userEmail.dirty" 
                     pattern="[^\s]{1}[a-zA-Z0-9_]+(?:\.[a-zA-Z0-9_]+)*@[^-](?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?" required
            />
           </div>  
           <div class="form-group" style="text-align:center">
             <button type="submit" class="w3-btn w3-blue w3-round w3-small" [disabled]="!myLoginForm.valid">Submit</button>
             &nbsp;&nbsp;
             <button type="reset" class="w3-btn w3-pink w3-round w3-small">Reset</button>
           </div>
        </form> 

       </div>  
     </div>
  </div> 
  </div>
  <ng-template #SecondBlock>
    <div *ngIf="second; else ThirdBlock">
        <div class="row w3-padding-64">
            <div class="col-md-3"></div>
            <div class="col-md-6">
              <h5 class="w3-padding w3-blue">Verification</h5>
              <div class="w3-card-4 w3-padding" style="margin-top:-10px" id="login_div">
       
               <form #myLoginForm="ngForm" (ngSubmit)="otpVerification(myLoginForm)">
                 
                  <div class="form-group">
                      <div align="center">
                          <label>{{EmailId}}</label>
                        </div>
                    <p style="text-align: center"></p>
                    <input type="text" autocomplete="off" name="user_otp" [(ngModel)]="userOtp" #userEmail="ngModel" class="form-control" 
                            placeholder="Enter your High End Password" [class.is-invalid]="userEmail.invalid && userEmail.touched " 
                            required
                   />
                  </div>  
                  <div class="form-group" style="text-align:center">
                    <button type="submit" class="w3-btn w3-blue w3-round w3-small" [disabled]="!myLoginForm.valid">Submit</button>
                    &nbsp;&nbsp;
                    <button type="reset" class="w3-btn w3-pink w3-round w3-small">Reset</button>
                  </div>
               </form> 
       
              </div>  
            </div>
         </div> 
    </div>
  </ng-template>
  <ng-template #ThirdBlock>
      <div class="row w3-padding-64">
          <div class="col-md-3"></div>
          <div class="col-md-6">
            <h5 class="w3-padding w3-blue">Change Password</h5>
            <div class="w3-card-4 w3-padding" style="margin-top:-10px" id="login_div">
     
             <form #myLoginForm="ngForm" (ngSubmit)="changePassword(myLoginForm)">
               
                <div class="form-group">
                  <div align="center">
                    <label>{{EmailId}}</label>
                  </div> 
                  <input type="password" autocomplete="off"  name="user_pass" [(ngModel)]="Password" #userPass="ngModel" class="form-control" 
                  placeholder="Enter your Password" [class.is-invalid]="userPass.invalid && userPass.dirty" minlength="5" 
                  maxlength="15" pattern="^.*(?=.{8,})(?=..*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[$&+,:;=?@#|'<>.-^*()%!]).*$"  required
                   />

                   <div class="validation-error" oncopy="return false" onpaste="return false" style="text-align:center" *ngIf="(userPass.invalid && userPass.dirty)"><span style="color:red;font-size:13px">Please enter a valid password</span></div>
                  </div> 
                 

                <div class="form-group">
                    <p style="text-align: center"></p>  
                    <input type="password" autocomplete="off"  name="user_cpass" [(ngModel)]="cPassword" #usercPass="ngModel" class="form-control" 
                    placeholder="Confirm Password" [class.is-invalid]="usercPass.invalid && usercPass.dirty && Password!=cPassword" minlength="5" 
                    maxlength="15" pattern="^.*(?=.{8,})(?=..*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[$&+,:;=?@#|'<>.-^*()%!]).*$"  required
                     />

                     <div class="validation-error" oncopy="return false" onpaste="return false" style="text-align:center" *ngIf="(userPass.value!=usercPass.value) && usercPass.dirty"><span style="color:red;font-size:13px">Invalid Confirm Password</span></div> 
                  </div>  

                <div class="form-group" style="text-align:center">
                  <button type="submit" class="w3-btn w3-blue w3-round w3-small" [disabled]="!myLoginForm.valid || Password!=cPassword">Submit</button>
                  &nbsp;&nbsp;
                  <button type="reset" class="w3-btn w3-pink w3-round w3-small">Reset</button>
                </div>
             </form> 
     
            </div>  
          </div>
       </div> 
  </ng-template>
</div> 
<app-footer></app-footer>